% ================================
% mio_stile_esame.sty
% Stile editoriale per "Appunti Esame di Stato"
% ================================

% --- Switch EPUB vs PDF ---
\newif\ifEPUB   % Flag: default = PDF (\EPUBfalse)

% --- Codifica e Lingua ---
\usepackage[utf8]{inputenc} % Codifica dei caratteri
\usepackage[T1]{fontenc}    % Supporto per caratteri estesi
\usepackage[italian]{babel} % Sillabazione/Tipografia italiana
\usepackage{csquotes}

% --- Matematica e Simboli ---
\usepackage{amsmath,amssymb,amsfonts}
\usepackage{mathtools}

% --- Tipografia editoriale ---
\usepackage{microtype} % Migliora giustificazione/kerning (look da libro)
\usepackage{parskip}   % Niente indentazione, spazio tra paragrafi

% --- Font cross-engine (facoltativo) ---
\usepackage{iftex}
\ifPDFTeX
  \usepackage{lmodern} % Font moderni per pdflatex
\else
  % Se un giorno userai XeLaTeX/LuaLaTeX:
  % \usepackage{fontspec}
  % \setmainfont{Libertinus Serif} % o EB Garamond / Source Serif / Times
\fi

% --- Colori ---
\usepackage{xcolor}
\definecolor{coverPrimary}{HTML}{1F4B99} % blu editoriale
\definecolor{coverAccent}{HTML}{F2C14E}  % giallo accento
\definecolor{coverBg}{HTML}{F8F9FB}      % sfondo chiaro
\definecolor{linkColor}{HTML}{0A66C2}    % blu link coerente

% --- Layout e Margini ---
\usepackage{geometry}
\geometry{a4paper, total={170mm,257mm}, left=20mm, right=20mm, top=20mm, bottom=20mm}

% --- Interlinea (utility) ---
\usepackage{setspace}
\newcommand{\mainlinespacing}[1]{\linespread{#1}\selectfont}

% --- Grafica e Immagini ---
\usepackage{graphicx}
\graphicspath{{./immagini/}} % percorso di default immagini
% Immagini responsive alla larghezza del testo (override possibile nel documento)
\setkeys{Gin}{width=\linewidth,keepaspectratio}

% --- Tabelle ---
\usepackage{booktabs}
\usepackage{multirow}
\usepackage{tabularx}
\newcolumntype{Y}{>{\raggedright\arraybackslash}X}

% --- Sottofigure/Sottotabelle ---
\usepackage{subcaption}

% --- Elenchi personalizzati ---
\usepackage{enumitem}
\setlist{topsep=4pt,itemsep=2pt,parsep=0pt}

% --- Hyperlink e PDF (coerente con palette + metadati) ---
\usepackage{hyperref}
\newcommand{\ProjectTitle}{Appunti per l'Esame di Stato}
\newcommand{\ProjectSubtitle}{Ingegnere Junior — Settore Informazione}
\newcommand{\ProjectAuthor}{Dott. Paolo Pietrelli}
\newcommand{\ProjectCollab}{Con la collaborazione della community open-source}
\newcommand{\ProjectTagline}{Risorsa gratuita e collaborativa per la preparazione all’Esame di Stato.}

\hypersetup{
    colorlinks         = true,
    linkcolor          = linkColor,
    urlcolor           = linkColor,
    citecolor          = linkColor,
    pdftitle           = {\ProjectTitle\ — \ProjectSubtitle},
    pdfauthor          = {\ProjectAuthor},
    pdfsubject         = {Ingegneria dell'Informazione — Appunti open-source},
    pdfkeywords        = {Esame di Stato, Ingegneria dell'Informazione, Appunti, PDF, Open-Source},
    bookmarks          = true,
    bookmarksnumbered  = true,
    pdfstartview       = {FitH}
}

% URL lunghe a capo in modo gradevole
\usepackage{url}
\def\UrlBreaks{\do\/\do-\do\_}

% --- Acronimi ---
\usepackage{acronym}

% --- Bibliografia ---
\usepackage[backend=biber,style=numeric,citestyle=numeric]{biblatex}
\addbibresource{stili/bibtex.bib}

% --- Listings (codice) ---
% --- PACCHETTO LISTINGS (gestione PDF vs EPUB) ---
\ifEPUB
  \usepackage{verbatim}
  \let\lstinline\texttt
  \renewenvironment{lstlisting}{\verbatim}{\endverbatim}
\else
  \usepackage{listings}
\fi

% (Le impostazioni dettagliate restano in stili/impostazioni_codice.sty)

% --- Rilevamento HTML/EPUB (tex4ebook) vs PDF ---
% Utile per mostrare/nascondere elementi solo PDF (es. copertine full-page)
\newif\ifHTML
\makeatletter
\@ifundefined{HCode}{\HTMLfalse}{\HTMLtrue}
\makeatother

% --- Fine: mio_stile_esame.sty ---
